apiVersion: directory.forgerock.com/v1alpha1
kind: DirectoryService
metadata:
  name: ds
spec:
  # Image is optional, and will be defaulted by the operator to the current ds image
  # image: gcr.io/forgeops-public/ds:latest
  # The number of DS servers in the topology
  replicas: 1
  # The resources assigned to each DS pod
  resources:
    requests:
      memory: 512Mi
      cpu: 250m
    limits:
      memory: 1024Mi
  # Account secrets maps DS accounts to new or existing secrets.
  # For example, a secret may have been generated by another operator such as secret agent.
  # Referenced secrets are not deleted when the CR is deleted.
  accountSecrets:
  - dn: uid=admin
    secretName: ds-passwords
    key: dirmanager.pw
  # In this example we want to generate a random secret for the monitor.
  # If a secret is generated, the secret Name will be prefixed by "${metadata.name}-"
  # Generated secrets are also deleted if the CR is deleted.
  - dn: uid=monitor
    secretName: monitor
    key: password
    createIfMissing: true
  # An example of a service account password
  # TODO: We dont yet support changing / setting service account passwords.
  - dn: "uid=openam_cts,ou=admins,ou=famrecords,ou=openam-session,ou=tokens"
    secretName: openam-cts-account
    key: password
    createIfMissing: true




